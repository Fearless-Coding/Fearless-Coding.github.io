<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.67" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://vuepress-theme-hope-docs-demo.netlify.app/data/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/Redis%E8%BF%9B%E9%98%B6.html"><meta property="og:title" content="Redisè¿›é˜¶"><meta property="og:description" content="Redisè¿›é˜¶ äº‹åŠ¡ Redisä¸­æ²¡æœ‰éš”ç¦»çº§åˆ«çš„æ¦‚å¿µ Redisä¸­å•æ¡å‘½ä»¤æ˜¯ä¿è¯åŸå­æ€§çš„ï¼Œä½†æ˜¯äº‹åŠ¡ä¸ä¿è¯åŸå­æ€§ã€‚ï¼ˆæœ‰è¿è¡Œæ—¶å¼‚å¸¸ä¸ä¼šå›æ»šï¼‰ æ­£å¸¸æ‰§è¡Œäº‹åŠ¡ï¼š 127.0.0.1:6379&gt; MULTI			# å¼€å¯äº‹åŠ¡ OK 127.0.0.1:6379&gt; set k1 v1		 QUEUED 127.0.0.1:6379&gt; set k2 v2 QUEUED 127.0.0.1:6379&gt; get k1 QUEUED 127.0.0.1:6379&gt; exec			# æ‰§è¡Œäº‹åŠ¡ 1) OK 2) OK 3) "v1""><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-12-11T15:09:55.000Z"><meta property="article:author" content="Fearless"><meta property="article:modified_time" content="2023-12-11T15:09:55.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Redisè¿›é˜¶","image":[""],"dateModified":"2023-12-11T15:09:55.000Z","author":[{"@type":"Person","name":"Fearless"}]}</script><title>Redisè¿›é˜¶</title><meta name="description" content="Redisè¿›é˜¶ äº‹åŠ¡ Redisä¸­æ²¡æœ‰éš”ç¦»çº§åˆ«çš„æ¦‚å¿µ Redisä¸­å•æ¡å‘½ä»¤æ˜¯ä¿è¯åŸå­æ€§çš„ï¼Œä½†æ˜¯äº‹åŠ¡ä¸ä¿è¯åŸå­æ€§ã€‚ï¼ˆæœ‰è¿è¡Œæ—¶å¼‚å¸¸ä¸ä¼šå›æ»šï¼‰ æ­£å¸¸æ‰§è¡Œäº‹åŠ¡ï¼š 127.0.0.1:6379&gt; MULTI			# å¼€å¯äº‹åŠ¡ OK 127.0.0.1:6379&gt; set k1 v1		 QUEUED 127.0.0.1:6379&gt; set k2 v2 QUEUED 127.0.0.1:6379&gt; get k1 QUEUED 127.0.0.1:6379&gt; exec			# æ‰§è¡Œäº‹åŠ¡ 1) OK 2) OK 3) "v1"">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-0de11b29.css" as="style"><link rel="stylesheet" href="/assets/style-0de11b29.css">
    <link rel="modulepreload" href="/assets/app-8e0f9155.js"><link rel="modulepreload" href="/assets/Redisè¿›é˜¶.html-abc47e9e.js"><link rel="modulepreload" href="/assets/Redisè¿›é˜¶.html-8fa329b9.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-c27b6911.js"><link rel="prefetch" href="/assets/index.html-0b1e5f83.js" as="script"><link rel="prefetch" href="/assets/index.html-20be0645.js" as="script"><link rel="prefetch" href="/assets/index.html-a59ef8bd.js" as="script"><link rel="prefetch" href="/assets/disable.html-b9506c36.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-9e084c53.js" as="script"><link rel="prefetch" href="/assets/markdown.html-94c3075c.js" as="script"><link rel="prefetch" href="/assets/page.html-c533fa67.js" as="script"><link rel="prefetch" href="/assets/slides.html-07d872c3.js" as="script"><link rel="prefetch" href="/assets/index.html-2a683411.js" as="script"><link rel="prefetch" href="/assets/index.html-b4eb998d.js" as="script"><link rel="prefetch" href="/assets/index.html-edcb3b0e.js" as="script"><link rel="prefetch" href="/assets/index.html-ca30b0c5.js" as="script"><link rel="prefetch" href="/assets/Spring.html-115d3bd6.js" as="script"><link rel="prefetch" href="/assets/Javaå¹¶å‘.html-73b0d2d3.js" as="script"><link rel="prefetch" href="/assets/index.html-46d81a03.js" as="script"><link rel="prefetch" href="/assets/é¢è¯•.html-85fcc984.js" as="script"><link rel="prefetch" href="/assets/index.html-80e567b3.js" as="script"><link rel="prefetch" href="/assets/å·¥å…·.html-50a541a2.js" as="script"><link rel="prefetch" href="/assets/index.html-956ddef4.js" as="script"><link rel="prefetch" href="/assets/WebSocket.html-521ab6be.js" as="script"><link rel="prefetch" href="/assets/index.html-fe90d36d.js" as="script"><link rel="prefetch" href="/assets/Vue.html-ef99c1e2.js" as="script"><link rel="prefetch" href="/assets/Linux.html-69769a77.js" as="script"><link rel="prefetch" href="/assets/index.html-e6c328bd.js" as="script"><link rel="prefetch" href="/assets/Git.html-64c80a8b.js" as="script"><link rel="prefetch" href="/assets/index.html-7926ee43.js" as="script"><link rel="prefetch" href="/assets/index.html-02861324.js" as="script"><link rel="prefetch" href="/assets/Kafka.html-924fa441.js" as="script"><link rel="prefetch" href="/assets/index.html-a9901f68.js" as="script"><link rel="prefetch" href="/assets/OOMçœŸå®ç”Ÿäº§åˆ†æ.html-2bf6aa05.js" as="script"><link rel="prefetch" href="/assets/index.html-be7519c9.js" as="script"><link rel="prefetch" href="/assets/é™æµ.html-6df274c3.js" as="script"><link rel="prefetch" href="/assets/index.html-cfbee508.js" as="script"><link rel="prefetch" href="/assets/æ•°æ®ç»“æ„.html-eca0c43d.js" as="script"><link rel="prefetch" href="/assets/ç®—æ³•.html-1469c49d.js" as="script"><link rel="prefetch" href="/assets/è®¾è®¡æ¨¡å¼.html-0aa5dc52.js" as="script"><link rel="prefetch" href="/assets/Java8æ–°ç‰¹æ€§.html-6181b83c.js" as="script"><link rel="prefetch" href="/assets/index.html-5ac6adc8.js" as="script"><link rel="prefetch" href="/assets/baz.html-cd90890f.js" as="script"><link rel="prefetch" href="/assets/index.html-879a924f.js" as="script"><link rel="prefetch" href="/assets/ray.html-fe7c3f61.js" as="script"><link rel="prefetch" href="/assets/index.html-afec2a3a.js" as="script"><link rel="prefetch" href="/assets/åˆ›å»ºé¡¹ç›®.html-df1027cb.js" as="script"><link rel="prefetch" href="/assets/1.JVM.html-f710cf7b.js" as="script"><link rel="prefetch" href="/assets/2.JVMç¬”è®°ï¼ˆä¸€ï¼‰.html-b2ec3ca4.js" as="script"><link rel="prefetch" href="/assets/3.JVMç¬”è®°ï¼ˆä¸‰ï¼‰.html-baa7cfbe.js" as="script"><link rel="prefetch" href="/assets/3.JVMç¬”è®°ï¼ˆäºŒï¼‰.html-682dc3a8.js" as="script"><link rel="prefetch" href="/assets/index.html-88703848.js" as="script"><link rel="prefetch" href="/assets/index.html-4853a958.js" as="script"><link rel="prefetch" href="/assets/Vue.html-36472a18.js" as="script"><link rel="prefetch" href="/assets/è¿è¡Œç¯å¢ƒè®¾ç½®.html-57b18a74.js" as="script"><link rel="prefetch" href="/assets/Mysqlä¼˜åŒ–.html-16ce2052.js" as="script"><link rel="prefetch" href="/assets/MysqlåŸºç¡€.html-e0ee1f86.js" as="script"><link rel="prefetch" href="/assets/Mysqlé¢è¯•é¢˜.html-ff77294d.js" as="script"><link rel="prefetch" href="/assets/RedisåŸºç¡€.html-b7a61bf1.js" as="script"><link rel="prefetch" href="/assets/Rediså®æˆ˜.html-0a6a63f9.js" as="script"><link rel="prefetch" href="/assets/index.html-efb265c1.js" as="script"><link rel="prefetch" href="/assets/RocketMQ.html-1ef89e9b.js" as="script"><link rel="prefetch" href="/assets/404.html-1c85953a.js" as="script"><link rel="prefetch" href="/assets/index.html-2f00fdb4.js" as="script"><link rel="prefetch" href="/assets/index.html-15f64e0d.js" as="script"><link rel="prefetch" href="/assets/index.html-3f08ade6.js" as="script"><link rel="prefetch" href="/assets/index.html-e322ee0e.js" as="script"><link rel="prefetch" href="/assets/index.html-0458edb1.js" as="script"><link rel="prefetch" href="/assets/index.html-0120aad6.js" as="script"><link rel="prefetch" href="/assets/index.html-85b899cb.js" as="script"><link rel="prefetch" href="/assets/index.html-3e692a09.js" as="script"><link rel="prefetch" href="/assets/index.html-f1b4328d.js" as="script"><link rel="prefetch" href="/assets/index.html-f5967893.js" as="script"><link rel="prefetch" href="/assets/index.html-f57d247d.js" as="script"><link rel="prefetch" href="/assets/index.html-373361bf.js" as="script"><link rel="prefetch" href="/assets/index.html-820b4eb0.js" as="script"><link rel="prefetch" href="/assets/index.html-0fc990f6.js" as="script"><link rel="prefetch" href="/assets/index.html-6b29f0ca.js" as="script"><link rel="prefetch" href="/assets/index.html-caeeb842.js" as="script"><link rel="prefetch" href="/assets/index.html-50b9ad87.js" as="script"><link rel="prefetch" href="/assets/index.html-e0ba4be6.js" as="script"><link rel="prefetch" href="/assets/index.html-ab22d30c.js" as="script"><link rel="prefetch" href="/assets/index.html-a28db9df.js" as="script"><link rel="prefetch" href="/assets/index.html-c80ff879.js" as="script"><link rel="prefetch" href="/assets/disable.html-1c29a258.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-97add202.js" as="script"><link rel="prefetch" href="/assets/markdown.html-555c3583.js" as="script"><link rel="prefetch" href="/assets/page.html-516a3cd9.js" as="script"><link rel="prefetch" href="/assets/slides.html-4b55257b.js" as="script"><link rel="prefetch" href="/assets/index.html-e88c4186.js" as="script"><link rel="prefetch" href="/assets/index.html-dc2d7d40.js" as="script"><link rel="prefetch" href="/assets/index.html-61719a81.js" as="script"><link rel="prefetch" href="/assets/index.html-098835f6.js" as="script"><link rel="prefetch" href="/assets/Spring.html-f12bf53e.js" as="script"><link rel="prefetch" href="/assets/Javaå¹¶å‘.html-5c73b433.js" as="script"><link rel="prefetch" href="/assets/index.html-c9ae85b3.js" as="script"><link rel="prefetch" href="/assets/é¢è¯•.html-506e2fba.js" as="script"><link rel="prefetch" href="/assets/index.html-1d858fef.js" as="script"><link rel="prefetch" href="/assets/å·¥å…·.html-4a94343f.js" as="script"><link rel="prefetch" href="/assets/index.html-08196d35.js" as="script"><link rel="prefetch" href="/assets/WebSocket.html-447cd1ad.js" as="script"><link rel="prefetch" href="/assets/index.html-d03fb32e.js" as="script"><link rel="prefetch" href="/assets/Vue.html-abc3a77d.js" as="script"><link rel="prefetch" href="/assets/Linux.html-6db0d3e5.js" as="script"><link rel="prefetch" href="/assets/index.html-7fd7c552.js" as="script"><link rel="prefetch" href="/assets/Git.html-909fe313.js" as="script"><link rel="prefetch" href="/assets/index.html-64bde00d.js" as="script"><link rel="prefetch" href="/assets/index.html-6698a567.js" as="script"><link rel="prefetch" href="/assets/Kafka.html-40d0bca6.js" as="script"><link rel="prefetch" href="/assets/index.html-e71113e0.js" as="script"><link rel="prefetch" href="/assets/OOMçœŸå®ç”Ÿäº§åˆ†æ.html-0307bcbe.js" as="script"><link rel="prefetch" href="/assets/index.html-b76d044c.js" as="script"><link rel="prefetch" href="/assets/é™æµ.html-66efaee5.js" as="script"><link rel="prefetch" href="/assets/index.html-5decb203.js" as="script"><link rel="prefetch" href="/assets/æ•°æ®ç»“æ„.html-a63dd870.js" as="script"><link rel="prefetch" href="/assets/ç®—æ³•.html-827a26dc.js" as="script"><link rel="prefetch" href="/assets/è®¾è®¡æ¨¡å¼.html-0e2777b8.js" as="script"><link rel="prefetch" href="/assets/Java8æ–°ç‰¹æ€§.html-37e11bb1.js" as="script"><link rel="prefetch" href="/assets/index.html-084d3de1.js" as="script"><link rel="prefetch" href="/assets/baz.html-f1ebbe03.js" as="script"><link rel="prefetch" href="/assets/index.html-14b109d2.js" as="script"><link rel="prefetch" href="/assets/ray.html-23630783.js" as="script"><link rel="prefetch" href="/assets/index.html-b30b972a.js" as="script"><link rel="prefetch" href="/assets/åˆ›å»ºé¡¹ç›®.html-7646ce6e.js" as="script"><link rel="prefetch" href="/assets/1.JVM.html-2f3c83e4.js" as="script"><link rel="prefetch" href="/assets/2.JVMç¬”è®°ï¼ˆä¸€ï¼‰.html-103ff8c1.js" as="script"><link rel="prefetch" href="/assets/3.JVMç¬”è®°ï¼ˆä¸‰ï¼‰.html-c6788d4d.js" as="script"><link rel="prefetch" href="/assets/3.JVMç¬”è®°ï¼ˆäºŒï¼‰.html-dd766549.js" as="script"><link rel="prefetch" href="/assets/index.html-62d09601.js" as="script"><link rel="prefetch" href="/assets/index.html-ab397c71.js" as="script"><link rel="prefetch" href="/assets/Vue.html-5da1fffb.js" as="script"><link rel="prefetch" href="/assets/è¿è¡Œç¯å¢ƒè®¾ç½®.html-b08affcf.js" as="script"><link rel="prefetch" href="/assets/Mysqlä¼˜åŒ–.html-69781e28.js" as="script"><link rel="prefetch" href="/assets/MysqlåŸºç¡€.html-b08a3daf.js" as="script"><link rel="prefetch" href="/assets/Mysqlé¢è¯•é¢˜.html-8dbb6fff.js" as="script"><link rel="prefetch" href="/assets/RedisåŸºç¡€.html-ed48bf76.js" as="script"><link rel="prefetch" href="/assets/Rediså®æˆ˜.html-191ecdc5.js" as="script"><link rel="prefetch" href="/assets/index.html-d2a30195.js" as="script"><link rel="prefetch" href="/assets/RocketMQ.html-a646532a.js" as="script"><link rel="prefetch" href="/assets/404.html-0439dfa7.js" as="script"><link rel="prefetch" href="/assets/index.html-fb913c05.js" as="script"><link rel="prefetch" href="/assets/index.html-107d86a9.js" as="script"><link rel="prefetch" href="/assets/index.html-b40301ac.js" as="script"><link rel="prefetch" href="/assets/index.html-72e3af90.js" as="script"><link rel="prefetch" href="/assets/index.html-d594ea29.js" as="script"><link rel="prefetch" href="/assets/index.html-2bd3ca12.js" as="script"><link rel="prefetch" href="/assets/index.html-29c1cacf.js" as="script"><link rel="prefetch" href="/assets/index.html-d6fdd136.js" as="script"><link rel="prefetch" href="/assets/index.html-6525cec7.js" as="script"><link rel="prefetch" href="/assets/index.html-9cd7feeb.js" as="script"><link rel="prefetch" href="/assets/index.html-83efa73b.js" as="script"><link rel="prefetch" href="/assets/index.html-f86b62c2.js" as="script"><link rel="prefetch" href="/assets/index.html-4f454995.js" as="script"><link rel="prefetch" href="/assets/index.html-fb36fb41.js" as="script"><link rel="prefetch" href="/assets/index.html-a5cf0449.js" as="script"><link rel="prefetch" href="/assets/index.html-4b2bd9a6.js" as="script"><link rel="prefetch" href="/assets/index.html-fdd24f42.js" as="script"><link rel="prefetch" href="/assets/index.html-a89a48b1.js" as="script"><link rel="prefetch" href="/assets/giscus-0b7adcf8.js" as="script"><link rel="prefetch" href="/assets/auto-fe80bb03.js" as="script"><link rel="prefetch" href="/assets/index-2bf332f6.js" as="script"><link rel="prefetch" href="/assets/flowchart-c441f34d.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-203d2145.js" as="script"><link rel="prefetch" href="/assets/highlight.esm-75b11b9d.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-9d5bc2ce.js" as="script"><link rel="prefetch" href="/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/assets/notes.esm-a106bb2c.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-1a4c3ae7.js" as="script"><link rel="prefetch" href="/assets/search.esm-7e6792e2.js" as="script"><link rel="prefetch" href="/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/assets/VuePlayground-a0afbcb6.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-1a9f4b8e.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand vp-brand" href="/"><img class="vp-nav-logo" src="/logo.svg" alt><!----><!----></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a aria-label="å¯¼èˆªæ€»è§ˆ" class="vp-link nav-link nav-link" href="/menu/"><span class="font-icon icon fa-fw fa-sm fas fa-signs-post" style=""></span>å¯¼èˆªæ€»è§ˆ<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="å¼€æºé¡¹ç›®æ¨è" class="vp-link nav-link nav-link" href="/openSource/"><span class="font-icon icon fa-fw fa-sm fas fa-signs-post" style=""></span>å¼€æºé¡¹ç›®æ¨è<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="ä¸»è¦åŠŸèƒ½ä¸é…ç½®æ¼”ç¤º" class="vp-link nav-link nav-link" href="/demo/"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>ä¸»è¦åŠŸèƒ½ä¸é…ç½®æ¼”ç¤º<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="æŒ‡å—"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-lightbulb" style=""></span>æŒ‡å—</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Bar</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="Baz" class="vp-link nav-link nav-link" href="/guide/bar/baz.html"><span class="font-icon icon fa-fw fa-sm fas fa-circle-info" style=""></span>Baz<!----></a></li><li class="dropdown-subitem"><a aria-label="..." class="vp-link nav-link nav-link" href="/guide/bar/"><span class="font-icon icon fa-fw fa-sm fas fa-ellipsis" style=""></span>...<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Foo</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="Ray" class="vp-link nav-link nav-link" href="/guide/foo/ray.html"><span class="font-icon icon fa-fw fa-sm fas fa-circle-info" style=""></span>Ray<!----></a></li><li class="dropdown-subitem"><a aria-label="..." class="vp-link nav-link nav-link" href="/guide/foo/"><span class="font-icon icon fa-fw fa-sm fas fa-ellipsis" style=""></span>...<!----></a></li></ul></li></ul></button></div></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="nav-item vp-repo"><a class="vp-repo-link" href="https://github.com//Fearless-Coding" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" class="outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span><span class="vp-sidebar-title">æ¶ˆæ¯é˜Ÿåˆ—</span><!----></p><ul class="vp-sidebar-links"><li><!--[--><a aria-label="Kafka" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/data/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/Kafka.html"><!---->Kafka<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">RocketMQ</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span><span class="vp-sidebar-title">Java</span><!----></p><ul class="vp-sidebar-links"><li><!--[--><a aria-label="javaå¹¶å‘" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/data/Java/Java%E5%B9%B6%E5%8F%91.html"><!---->javaå¹¶å‘<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">JVM</span><span class="vp-arrow end"></span></button><!----></section></li><li><!--[--><a aria-label="é¢è¯•é¢˜" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/data/Java/%E9%9D%A2%E8%AF%95.html"><!---->é¢è¯•é¢˜<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span><span class="vp-sidebar-title">J2EE</span><!----></p><ul class="vp-sidebar-links"><li><!--[--><a aria-label="Spring" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/data/J2EE/Spring.html"><!---->Spring<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">SpringBoot</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span><span class="vp-sidebar-title">Webæ¡†æ¶</span><!----></p><ul class="vp-sidebar-links"><li><!--[--><a aria-label="WebSocket" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/data/Web%E6%A1%86%E6%9E%B6/WebSocket.html"><!---->WebSocket<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading active"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span><span class="vp-sidebar-title">æ•°æ®åº“</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Mysql</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><!----><span class="vp-sidebar-title">Redis</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><!--[--><a aria-label="RedisåŸºç¡€" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/data/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/Redis%E5%9F%BA%E7%A1%80.html"><!---->RedisåŸºç¡€<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Rediså®æˆ˜" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/data/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/Redis%E5%AE%9E%E6%88%98.html"><!---->Rediså®æˆ˜<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Redisè¿›é˜¶" class="vp-link nav-link active vp-sidebar-link vp-sidebar-page active nav-link active vp-sidebar-link vp-sidebar-page active" href="/data/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/Redis%E8%BF%9B%E9%98%B6.html"><!---->Redisè¿›é˜¶<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="äº‹åŠ¡" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/data/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/Redis%E8%BF%9B%E9%98%B6.html#äº‹åŠ¡"><!---->äº‹åŠ¡<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="ä¹è§‚é”watchç›‘æ§" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/data/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/Redis%E8%BF%9B%E9%98%B6.html#ä¹è§‚é”watchç›‘æ§"><!---->ä¹è§‚é”watchç›‘æ§<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="Redis å‘å¸ƒè®¢é˜…" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/data/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/Redis%E8%BF%9B%E9%98%B6.html#redis-å‘å¸ƒè®¢é˜…"><!---->Redis å‘å¸ƒè®¢é˜…<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="ä¸»ä»å¤åˆ¶" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/data/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/Redis%E8%BF%9B%E9%98%B6.html#ä¸»ä»å¤åˆ¶"><!---->ä¸»ä»å¤åˆ¶<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="å“¨å…µæ¨¡å¼" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/data/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/Redis%E8%BF%9B%E9%98%B6.html#å“¨å…µæ¨¡å¼"><!---->å“¨å…µæ¨¡å¼<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1ã€æ¶æ„å›¾" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/data/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/Redis%E8%BF%9B%E9%98%B6.html#_1ã€æ¶æ„å›¾"><!---->1ã€æ¶æ„å›¾<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2ã€æœåŠ¡å™¨åˆ—è¡¨" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/data/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/Redis%E8%BF%9B%E9%98%B6.html#_2ã€æœåŠ¡å™¨åˆ—è¡¨"><!---->2ã€æœåŠ¡å™¨åˆ—è¡¨<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3ã€æ­å»ºå“¨å…µæ¨¡å¼" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/data/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/Redis%E8%BF%9B%E9%98%B6.html#_3ã€æ­å»ºå“¨å…µæ¨¡å¼"><!---->3ã€æ­å»ºå“¨å…µæ¨¡å¼<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4ã€Javaå®¢æˆ·ç«¯è¿æ¥åŸç†" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/data/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/Redis%E8%BF%9B%E9%98%B6.html#_4ã€javaå®¢æˆ·ç«¯è¿æ¥åŸç†"><!---->4ã€Javaå®¢æˆ·ç«¯è¿æ¥åŸç†<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="5ã€å“¨å…µæ¨¡å¼å·¥ä½œåŸç†" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/data/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/Redis%E8%BF%9B%E9%98%B6.html#_5ã€å“¨å…µæ¨¡å¼å·¥ä½œåŸç†"><!---->5ã€å“¨å…µæ¨¡å¼å·¥ä½œåŸç†<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="ç¼“å­˜ç©¿é€ã€å‡»ç©¿å’Œé›ªå´©" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/data/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/Redis%E8%BF%9B%E9%98%B6.html#ç¼“å­˜ç©¿é€ã€å‡»ç©¿å’Œé›ªå´©"><!---->ç¼“å­˜ç©¿é€ã€å‡»ç©¿å’Œé›ªå´©<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1ã€ç¼“å­˜ç©¿é€" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/data/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/Redis%E8%BF%9B%E9%98%B6.html#_1ã€ç¼“å­˜ç©¿é€"><!---->1ã€ç¼“å­˜ç©¿é€<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2ã€ç¼“å­˜å‡»ç©¿" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/data/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/Redis%E8%BF%9B%E9%98%B6.html#_2ã€ç¼“å­˜å‡»ç©¿"><!---->2ã€ç¼“å­˜å‡»ç©¿<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3ã€ç¼“å­˜é›ªå´©" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/data/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/Redis%E8%BF%9B%E9%98%B6.html#_3ã€ç¼“å­˜é›ªå´©"><!---->3ã€ç¼“å­˜é›ªå´©<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="å¸ƒéš†è¿‡æ»¤å™¨" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/data/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/Redis%E8%BF%9B%E9%98%B6.html#å¸ƒéš†è¿‡æ»¤å™¨"><!---->å¸ƒéš†è¿‡æ»¤å™¨<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1ã€å¸ƒéš†è¿‡æ»¤å™¨ä½¿ç”¨åœºæ™¯" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/data/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/Redis%E8%BF%9B%E9%98%B6.html#_1ã€å¸ƒéš†è¿‡æ»¤å™¨ä½¿ç”¨åœºæ™¯"><!---->1ã€å¸ƒéš†è¿‡æ»¤å™¨ä½¿ç”¨åœºæ™¯<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2ã€å¸ƒéš†è¿‡æ»¤å™¨ç®€ä»‹" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/data/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/Redis%E8%BF%9B%E9%98%B6.html#_2ã€å¸ƒéš†è¿‡æ»¤å™¨ç®€ä»‹"><!---->2ã€å¸ƒéš†è¿‡æ»¤å™¨ç®€ä»‹<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3ã€Rediså®ç°å¸ƒéš†è¿‡æ»¤å™¨" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/data/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/Redis%E8%BF%9B%E9%98%B6.html#_3ã€rediså®ç°å¸ƒéš†è¿‡æ»¤å™¨"><!---->3ã€Rediså®ç°å¸ƒéš†è¿‡æ»¤å™¨<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4ã€guava å·¥å…·" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/data/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/Redis%E8%BF%9B%E9%98%B6.html#_4ã€guava-å·¥å…·"><!---->4ã€guava å·¥å…·<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="åº•å±‚åŸç†" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/data/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/Redis%E8%BF%9B%E9%98%B6.html#åº•å±‚åŸç†"><!---->åº•å±‚åŸç†<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="LUAè„šæœ¬" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/data/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/Redis%E8%BF%9B%E9%98%B6.html#luaè„šæœ¬"><!---->LUAè„šæœ¬<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="ä¸ºä»€ä¹ˆè¯´Redisæ˜¯å•çº¿ç¨‹çš„ä»¥åŠRedisä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/data/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/Redis%E8%BF%9B%E9%98%B6.html#ä¸ºä»€ä¹ˆè¯´redisæ˜¯å•çº¿ç¨‹çš„ä»¥åŠredisä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«"><!---->ä¸ºä»€ä¹ˆè¯´Redisæ˜¯å•çº¿ç¨‹çš„ä»¥åŠRedisä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul><!--]--></li></ul></section></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span><span class="vp-sidebar-title">è‡ªæˆ‘ä¿®å…»</span><!----></p><ul class="vp-sidebar-links"><li><!--[--><a aria-label="æ•°æ®ç»“æ„" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/data/%E8%87%AA%E6%88%91%E4%BF%AE%E5%85%BB/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html"><!---->æ•°æ®ç»“æ„<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="ç®—æ³•" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/data/%E8%87%AA%E6%88%91%E4%BF%AE%E5%85%BB/%E7%AE%97%E6%B3%95.html"><!---->ç®—æ³•<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="è®¾è®¡æ¨¡å¼" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/data/%E8%87%AA%E6%88%91%E4%BF%AE%E5%85%BB/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html"><!---->è®¾è®¡æ¨¡å¼<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span><span class="vp-sidebar-title">å®¹å™¨æœåŠ¡</span><!----></p><ul class="vp-sidebar-links"><li><!--[--><a aria-label="Linux" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/data/%E5%AE%B9%E5%99%A8%E6%9C%8D%E5%8A%A1/Linux.html"><!---->Linux<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span><span class="vp-sidebar-title">å¼€å‘å·¥å…·</span><!----></p><ul class="vp-sidebar-links"><li><!--[--><a aria-label="Git" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/data/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Git.html"><!---->Git<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span><span class="vp-sidebar-title">Javaå·¥å…·ç±»</span><!----></p><ul class="vp-sidebar-links"><li><!--[--><a aria-label="å·¥å…·" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/data/Java%E5%B7%A5%E5%85%B7%E7%B1%BB/%E5%B7%A5%E5%85%B7.html"><!---->å·¥å…·<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span><span class="vp-sidebar-title">å‰ç«¯æ¡†æ¶</span><!----></p><ul class="vp-sidebar-links"><li><!--[--><a aria-label="Vue" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/data/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/Vue.html"><!---->Vue<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Vue</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span><span class="vp-sidebar-title">ç³»ç»Ÿæ¶æ„</span><!----></p><ul class="vp-sidebar-links"><li><!--[--><a aria-label="é™æµ" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/data/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/%E9%99%90%E6%B5%81.html"><!---->é™æµ<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Redisè¿›é˜¶</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">Fearless</span></span><span property="author" content="Fearless"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-12-11T15:09:55.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 17 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT17M"></span><!----><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#äº‹åŠ¡">äº‹åŠ¡</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#ä¹è§‚é”watchç›‘æ§">ä¹è§‚é”watchç›‘æ§</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#redis-å‘å¸ƒè®¢é˜…">Redis å‘å¸ƒè®¢é˜…</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#ä¸»ä»å¤åˆ¶">ä¸»ä»å¤åˆ¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#å“¨å…µæ¨¡å¼">å“¨å…µæ¨¡å¼</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_1ã€æ¶æ„å›¾">1ã€æ¶æ„å›¾</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_2ã€æœåŠ¡å™¨åˆ—è¡¨">2ã€æœåŠ¡å™¨åˆ—è¡¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_3ã€æ­å»ºå“¨å…µæ¨¡å¼">3ã€æ­å»ºå“¨å…µæ¨¡å¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_4ã€javaå®¢æˆ·ç«¯è¿æ¥åŸç†">4ã€Javaå®¢æˆ·ç«¯è¿æ¥åŸç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_5ã€å“¨å…µæ¨¡å¼å·¥ä½œåŸç†">5ã€å“¨å…µæ¨¡å¼å·¥ä½œåŸç†</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#ç¼“å­˜ç©¿é€ã€å‡»ç©¿å’Œé›ªå´©">ç¼“å­˜ç©¿é€ã€å‡»ç©¿å’Œé›ªå´©</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_1ã€ç¼“å­˜ç©¿é€">1ã€ç¼“å­˜ç©¿é€</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_2ã€ç¼“å­˜å‡»ç©¿">2ã€ç¼“å­˜å‡»ç©¿</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_3ã€ç¼“å­˜é›ªå´©">3ã€ç¼“å­˜é›ªå´©</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#å¸ƒéš†è¿‡æ»¤å™¨">å¸ƒéš†è¿‡æ»¤å™¨</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_1ã€å¸ƒéš†è¿‡æ»¤å™¨ä½¿ç”¨åœºæ™¯">1ã€å¸ƒéš†è¿‡æ»¤å™¨ä½¿ç”¨åœºæ™¯</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_2ã€å¸ƒéš†è¿‡æ»¤å™¨ç®€ä»‹">2ã€å¸ƒéš†è¿‡æ»¤å™¨ç®€ä»‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_3ã€rediså®ç°å¸ƒéš†è¿‡æ»¤å™¨">3ã€Rediså®ç°å¸ƒéš†è¿‡æ»¤å™¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_4ã€guava-å·¥å…·">4ã€guava å·¥å…·</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#åº•å±‚åŸç†">åº•å±‚åŸç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#luaè„šæœ¬">LUAè„šæœ¬</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#ä¸ºä»€ä¹ˆè¯´redisæ˜¯å•çº¿ç¨‹çš„ä»¥åŠredisä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«">ä¸ºä»€ä¹ˆè¯´Redisæ˜¯å•çº¿ç¨‹çš„ä»¥åŠRedisä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h1 id="redisè¿›é˜¶" tabindex="-1"><a class="header-anchor" href="#redisè¿›é˜¶" aria-hidden="true">#</a> Redisè¿›é˜¶</h1><h2 id="äº‹åŠ¡" tabindex="-1"><a class="header-anchor" href="#äº‹åŠ¡" aria-hidden="true">#</a> äº‹åŠ¡</h2><p>Redisä¸­æ²¡æœ‰éš”ç¦»çº§åˆ«çš„æ¦‚å¿µ</p><p>Redisä¸­å•æ¡å‘½ä»¤æ˜¯ä¿è¯åŸå­æ€§çš„ï¼Œä½†æ˜¯äº‹åŠ¡ä¸ä¿è¯åŸå­æ€§ã€‚ï¼ˆæœ‰è¿è¡Œæ—¶å¼‚å¸¸ä¸ä¼šå›æ»šï¼‰</p><p>æ­£å¸¸æ‰§è¡Œäº‹åŠ¡ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> MULTI			<span class="token comment"># å¼€å¯äº‹åŠ¡</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> k1 v1		
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> k2 v2
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get k1
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">exec</span>			<span class="token comment"># æ‰§è¡Œäº‹åŠ¡</span>
<span class="token number">1</span><span class="token punctuation">)</span> OK
<span class="token number">2</span><span class="token punctuation">)</span> OK
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;v1&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ”¾å¼ƒäº‹åŠ¡ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> MULTI
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> k1 v1
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> discard			<span class="token comment"># æ”¾å¼ƒäº‹åŠ¡</span>
OK
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¼–è¯‘å‹å¼‚å¸¸ï¼ˆå‘½ä»¤æœ‰è¯¯ï¼ï¼‰äº‹åŠ¡ä¸­çš„æ‰€ä»¥å‘½ä»¤éƒ½ä¸ä¼šæ‰§è¡Œï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> MULTI
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> k1 v1
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> getset k2		<span class="token comment"># å‘½ä»¤æœ‰è¯¯</span>
<span class="token punctuation">(</span>error<span class="token punctuation">)</span> ERR wrong number of arguments <span class="token keyword">for</span> <span class="token string">&#39;getset&#39;</span> <span class="token builtin class-name">command</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">exec</span>			<span class="token comment"># æ‰§è¡Œäº‹åŠ¡æŠ¥é”™</span>
<span class="token punctuation">(</span>error<span class="token punctuation">)</span> EXECABORT Transaction discarded because of previous errors.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œæ—¶å¼‚å¸¸ï¼ˆ1/0ï¼‰å¦‚æœäº‹åŠ¡é˜Ÿåˆ—ä¸­å­˜åœ¨è¯­æ³•æ€§é”™è¯¯ï¼Œé‚£ä¹ˆæ‰§è¡Œå‘½ä»¤çš„æ—¶å€™ï¼Œå…¶ä»–å‘½ä»¤å¯ä»¥æ­£å¸¸æ‰§è¡Œï¼Œé”™è¯¯å‘½ä»¤æŠ›å‡ºå¼‚å¸¸ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get k1
<span class="token string">&quot;v1&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> MULTI
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get k1
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> incr k1			<span class="token comment"># é”™è¯¯è¯­æ³•ï¼Œåœ¨å­—ç¬¦ä¸²ä¸ŠåŠ 1</span>
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> k3 v3
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">exec</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;v1&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> ERR value is not an integer or out of range
<span class="token number">3</span><span class="token punctuation">)</span> OK
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ä¹è§‚é”watchç›‘æ§" tabindex="-1"><a class="header-anchor" href="#ä¹è§‚é”watchç›‘æ§" aria-hidden="true">#</a> ä¹è§‚é”watchç›‘æ§</h2><p>Redisä¸­watchå¯ä»¥å½“åšä¹è§‚é”å»æ“ä½œ</p><p>æ­£å¸¸æ‰§è¡Œï¼šäº‹åŠ¡æ­£å¸¸æ‰§è¡Œ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> money <span class="token number">100</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> out <span class="token number">20</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token function">watch</span> money			<span class="token comment"># ç›‘è§† moneyå¯¹è±¡</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> MULTI
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> decrby money <span class="token number">20</span>
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> incrby out <span class="token number">20</span>
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">exec</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">80</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">20</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¤šçº¿ç¨‹ä¿®æ”¹æµ‹è¯•ï¼šäº‹åŠ¡æäº¤å¤±è´¥</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token function">watch</span> money			<span class="token comment"># ç›‘è§† moneyå¯¹è±¡</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> MULTI -
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> decrby money <span class="token number">20</span>
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> incrby out <span class="token number">20</span>
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">exec</span>				<span class="token comment"># æ‰§è¡Œä¹‹å‰ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†moneyçš„å€¼ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šå¯¼è‡´äº‹åŠ¡æäº¤å¤±è´¥</span>
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¤±è´¥è§£å†³æ–¹æ¡ˆï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> UNWATCH				<span class="token comment"># å…ˆè§£é”</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token function">watch</span> money			<span class="token comment"># è·å–moneyçš„æœ€æ–°å€¼åœ¨è¿›è¡Œç›‘è§†</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> MULTI -
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> decrby money <span class="token number">10</span>
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> incrby out <span class="token number">10</span>
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">exec</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">190</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">30</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="redis-å‘å¸ƒè®¢é˜…" tabindex="-1"><a class="header-anchor" href="#redis-å‘å¸ƒè®¢é˜…" aria-hidden="true">#</a> Redis å‘å¸ƒè®¢é˜…</h2><p>è®¢é˜…ç«¯ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> PSUBSCRIBE pzy	<span class="token comment"># è®¢é˜…é¢‘é“-pzy</span>
Reading messages<span class="token punctuation">..</span>. <span class="token punctuation">(</span>press Ctrl-C to quit<span class="token punctuation">)</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;psubscribe&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;pzy&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token comment"># ç­‰å¾…è¯»å–æ¨é€æ¶ˆæ¯</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;pmessage&quot;</span>	<span class="token comment"># æ¶ˆæ¯</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;pzy&quot;</span>		<span class="token comment"># è®¢é˜…é¢‘é“çš„åç§°</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;pzy&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;helloworld&quot;</span>	<span class="token comment"># æ¶ˆæ¯çš„å…·ä½“å†…å®¹</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;pmessage&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;pzy&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;pzy&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;zhangsanshuo&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®¢æˆ·ç«¯ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> PUBLISH pzy helloworld		<span class="token comment"># å‘é€æ¶ˆæ¯</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> PUBLISH pzy zhangsanshuo
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ä¸»ä»å¤åˆ¶" tabindex="-1"><a class="header-anchor" href="#ä¸»ä»å¤åˆ¶" aria-hidden="true">#</a> ä¸»ä»å¤åˆ¶</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> info replication	<span class="token comment"># æŸ¥çœ‹å½“å‰åº“çš„ä¿¡æ¯</span>
<span class="token comment"># Replication</span>
role:master							<span class="token comment"># è§’è‰²ä¸ºmaster</span>
connected_slaves:0					<span class="token comment"># å½“å‰ä»æœºä¸ªæ•°</span>
master_repl_offset:0
repl_backlog_active:0
repl_backlog_size:1048576
repl_backlog_first_byte_offset:0
repl_backlog_histlen:0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¤åˆ¶3ä¸ªé…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹å¯¹åº”çš„ä¿¡æ¯ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯å°RedisæœåŠ¡å™¨éƒ½æ˜¯ä¸»èŠ‚ç‚¹ï¼Œåªéœ€è¦é…ç½®ä»æœºï¼‰</p><ol><li>ç«¯å£</li><li>pidåç§°</li><li>logæ–‡ä»¶åç§°</li><li>dump.rdbåç§°</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>å¯ä»¥é€šè¿‡slaveof ip port è¿›è¡Œé…ç½®ï¼Œé€šè¿‡è¿™ç§æ–¹å¼è¿›è¡Œé…ç½®çš„è¯æ˜¯æš‚æ—¶çš„ï¼Œè¦æ°¸ä¹…é…ç½®çš„è¯éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®
slaveof no one  å¯ä»¥å°†ä»èŠ‚ç‚¹å˜ä¸ºä¸»èŠ‚ç‚¹
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸»æœºå¯ä»¥å†™ï¼Œä»æœºåªèƒ½è¯»ä¸èƒ½å†™ï¼Œä»æœºå†™å…¥æ—¶ä¼šæŠ¥é”™</p><p><strong>å¤åˆ¶åŸç†éœ€è¦è¡¥å……</strong></p><p><strong>å±‚å±‚é“¾è·¯</strong>ä¹Ÿåªèƒ½æ˜¯ä»èŠ‚ç‚¹ï¼Œåªæœ‰ä¸€ä¸ªä¸»èŠ‚ç‚¹</p><h2 id="å“¨å…µæ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#å“¨å…µæ¨¡å¼" aria-hidden="true">#</a> å“¨å…µæ¨¡å¼</h2><p>å‚è€ƒï¼š<a href="https://www.cnblogs.com/ysocean/tag/Redis%E8%AF%A6%E8%A7%A3/" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/ysocean/tag/Redisè¯¦è§£/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="_1ã€æ¶æ„å›¾" tabindex="-1"><a class="header-anchor" href="#_1ã€æ¶æ„å›¾" aria-hidden="true">#</a> 1ã€æ¶æ„å›¾</h3><figure><img src="/images/1120165-20200210163639369-1861604133.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="_2ã€æœåŠ¡å™¨åˆ—è¡¨" tabindex="-1"><a class="header-anchor" href="#_2ã€æœåŠ¡å™¨åˆ—è¡¨" aria-hidden="true">#</a> 2ã€æœåŠ¡å™¨åˆ—è¡¨</h3><figure><img src="/images/1120165-20200210163723019-1037639332.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="_3ã€æ­å»ºå“¨å…µæ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_3ã€æ­å»ºå“¨å…µæ¨¡å¼" aria-hidden="true">#</a> 3ã€æ­å»ºå“¨å…µæ¨¡å¼</h3><p><strong>â‘ ã€ä¸»è¦é…ç½®é¡¹</strong></p><p>é…ç½®æ–‡ä»¶åç§°ä¸ºï¼šsentinel.conf</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#é…ç½®ç«¯å£</span>
port <span class="token number">26379</span>
<span class="token comment">#ä»¥å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼å¯åŠ¨</span>
daemonize <span class="token function">yes</span>
<span class="token comment">#æ—¥å¿—æ–‡ä»¶å</span>
logfile <span class="token string">&quot;sentinel_26379.log&quot;</span>
<span class="token comment">#å­˜æ”¾å¤‡ä»½æ–‡ä»¶ä»¥åŠæ—¥å¿—ç­‰æ–‡ä»¶çš„ç›®å½•</span>
<span class="token function">dir</span> <span class="token string">&quot;/opt/redis/data&quot;</span>
<span class="token comment">#ç›‘æ§çš„IP ç«¯å£å· åç§° sentinelé€šè¿‡æŠ•ç¥¨åè®¤ä¸ºmaterå®•æœºçš„æ•°é‡ï¼Œæ­¤å¤„ä¸ºè‡³å°‘``2``ä¸ª</span>
sentinel monitor mymaster <span class="token number">192.168</span>.14.101 <span class="token number">6379</span> <span class="token number">2</span>
<span class="token comment">#``30``ç§’pingä¸é€šä¸»èŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œä¸»è§‚è®¤ä¸ºmasterå®•æœº</span>
sentinel down-after-milliseconds mymaster <span class="token number">30000</span>
<span class="token comment">#æ•…éšœè½¬ç§»åé‡æ–°ä¸»ä»å¤åˆ¶ï¼Œ``1``è¡¨ç¤ºä¸²è¡Œï¼Œ&gt;``1``å¹¶è¡Œ</span>
sentinel parallel-syncs mymaster <span class="token number">1</span>
<span class="token comment">#æ•…éšœè½¬ç§»å¼€å§‹ï¼Œä¸‰åˆ†é’Ÿå†…æ²¡æœ‰å®Œæˆï¼Œåˆ™è®¤ä¸ºè½¬ç§»å¤±è´¥</span>
sentinel failover-timeout mymaster <span class="token number">180000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ä¸‰å°æœåŠ¡å™¨çš„ç«¯å£é…ç½®.å¦‚æœredisæœåŠ¡å™¨é…ç½®äº†å¯†ç è¿æ¥,åˆ™è¦å¢åŠ å¦‚ä¸‹é…ç½®:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>sentinel auth-pass mymaster <span class="token number">123</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åé¢çš„123è¡¨ç¤ºå¯†ç mymasterè¡¨ç¤ºä¸»æœº.æ³¨æ„è¿™è¡Œé…ç½®è¦é…ç½®åˆ° sentinel monitor mymaster ip port åé¢,å› ä¸ºåç§° mymasterè¦å…ˆå®šä¹‰.</p><p>â‘¡**ã€å¯åŠ¨å“¨å…µ**</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>redis-sentinel sentinel.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>â‘¢**ã€éªŒè¯ä¸»ä»è‡ªåŠ¨åˆ‡æ¢**</p><p>é¦–å…ˆkillæ‰Redis ä¸»èŠ‚ç‚¹.ç„¶åæŸ¥çœ‹sentinel æ—¥å¿—:</p><figure><img src="/images/1120165-20200210201842784-528299150.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ä¸Šé¢æˆªå›¾çº¢æ¡†æ¡†ä½çš„å‡ ä¸ªé‡è¦ä¿¡æ¯,è¿™é‡Œå…ˆä»‹ç»æœ€åä¸€è¡Œ,switch-master mymaster 192.168.14.101 6379 192.168.14.103 6381 è¡¨ç¤ºmasteræœåŠ¡å™¨å°†ç”±6379çš„redisæœåŠ¡åˆ‡æ¢ä¸º6381ç«¯å£çš„redisæœåŠ¡å™¨.</p><p>PS:<strong>+switch-master</strong> è¡¨ç¤ºåˆ‡æ¢ä¸»èŠ‚ç‚¹.</p><p>ç„¶åæˆ‘ä»¬é€šè¿‡ info replication å‘½ä»¤æŸ¥çœ‹ 6381çš„redisæœåŠ¡å™¨:</p><figure><img src="/images/1120165-20200210202309053-1947340550.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>æˆ‘ä»¬å‘ç°,6381çš„RedisæœåŠ¡å·²ç»åˆ‡æ¢æˆmasterèŠ‚ç‚¹äº†.</p><p>å¦å¤–,ä¹Ÿå¯ä»¥æŸ¥çœ‹sentinel.conf é…ç½®æ–‡ä»¶,é‡Œé¢çš„ sentinel monitor mymaster 192.168.14.101 6379 2 ä¹Ÿè‡ªåŠ¨æ›´æ”¹ä¸º sentinel monitor mymaster 192.168.14.103 6381 2 é…ç½®äº†.</p><h3 id="_4ã€javaå®¢æˆ·ç«¯è¿æ¥åŸç†" tabindex="-1"><a class="header-anchor" href="#_4ã€javaå®¢æˆ·ç«¯è¿æ¥åŸç†" aria-hidden="true">#</a> 4ã€Javaå®¢æˆ·ç«¯è¿æ¥åŸç†</h3><p><strong>â‘ </strong>ã€<strong>ç»“æ„å›¾</strong></p><figure><img src="/images/1120165-20200211122445582-11189433.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><strong>â‘¡ã€è¿æ¥æ­¥éª¤</strong></p><p>ä¸€.å®¢æˆ·ç«¯éå†æ‰€æœ‰çš„ Sentinel èŠ‚ç‚¹é›†åˆ,è·å–ä¸€ä¸ªå¯ç”¨çš„ Sentinel èŠ‚ç‚¹.</p><p>äºŒ.å®¢æˆ·ç«¯å‘å¯ç”¨çš„ Sentinel èŠ‚ç‚¹å‘é€ get-master-addr-by-name å‘½ä»¤,è·å–Redis Master èŠ‚ç‚¹.</p><p>ä¸‰.å®¢æˆ·ç«¯å‘Redis MasterèŠ‚ç‚¹å‘é€roleæˆ–role replication å‘½ä»¤,æ¥ç¡®å®šå…¶æ˜¯å¦æ˜¯MasterèŠ‚ç‚¹,å¹¶ä¸”èƒ½å¤Ÿè·å–å…¶ slaveèŠ‚ç‚¹ä¿¡æ¯.</p><p>å››.å®¢æˆ·ç«¯è·å–åˆ°ç¡®å®šçš„èŠ‚ç‚¹ä¿¡æ¯å,ä¾¿å¯ä»¥å‘Rediså‘é€å‘½ä»¤æ¥è¿›è¡Œåç»­æ“ä½œäº†</p><p>éœ€è¦æ³¨æ„çš„æ˜¯:å®¢æˆ·ç«¯æ˜¯å’ŒSentinelæ¥è¿›è¡Œäº¤äº’çš„,é€šè¿‡Sentinelæ¥è·å–çœŸæ­£çš„RedisèŠ‚ç‚¹ä¿¡æ¯,ç„¶åæ¥æ“ä½œ.å®é™…å·¥ä½œæ—¶,Sentinel å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªä¸»é¢˜é˜Ÿåˆ—,ç”¨æ¥ä¿å­˜Redisçš„èŠ‚ç‚¹ä¿¡æ¯,å¹¶å®æ—¶æ›´æ–°,å®¢æˆ·ç«¯è®¢é˜…äº†è¿™ä¸ªä¸»é¢˜,ç„¶åå®æ—¶çš„å»è·å–è¿™ä¸ªé˜Ÿåˆ—çš„RedisèŠ‚ç‚¹ä¿¡æ¯.</p><h3 id="_5ã€å“¨å…µæ¨¡å¼å·¥ä½œåŸç†" tabindex="-1"><a class="header-anchor" href="#_5ã€å“¨å…µæ¨¡å¼å·¥ä½œåŸç†" aria-hidden="true">#</a> 5ã€å“¨å…µæ¨¡å¼å·¥ä½œåŸç†</h3><p><strong>â‘ ã€ä¸‰ä¸ªå®šæ—¶ä»»åŠ¡</strong></p><p>ä¸€.æ¯10ç§’æ¯ä¸ª sentinel å¯¹master å’Œ slave æ‰§è¡Œinfo å‘½ä»¤:è¯¥å‘½ä»¤ç¬¬ä¸€ä¸ªæ˜¯ç”¨æ¥å‘ç°slaveèŠ‚ç‚¹,ç¬¬äºŒä¸ªæ˜¯ç¡®å®šä¸»ä»å…³ç³».</p><p>äºŒ.æ¯2ç§’æ¯ä¸ª sentinel é€šè¿‡ master èŠ‚ç‚¹çš„ channel(åç§°ä¸º_sentinel_:hello) äº¤æ¢ä¿¡æ¯(pub/sub):ç”¨æ¥äº¤äº’å¯¹èŠ‚ç‚¹çš„çœ‹æ³•(åé¢ä¼šä»‹ç»çš„èŠ‚ç‚¹ä¸»è§‚ä¸‹çº¿å’Œå®¢è§‚ä¸‹çº¿)ä»¥åŠè‡ªèº«ä¿¡æ¯.</p><p>ä¸‰.æ¯1ç§’æ¯ä¸ª sentinel å¯¹å…¶ä»– sentinel å’Œ redis æ‰§è¡Œ ping å‘½ä»¤,ç”¨äºå¿ƒè·³æ£€æµ‹,ä½œä¸ºèŠ‚ç‚¹å­˜æ´»çš„åˆ¤æ–­ä¾æ®.</p><p><strong>â‘¡ã€ä¸»è§‚ä¸‹çº¿å’Œå®¢è§‚ä¸‹çº¿</strong></p><p>ä¸€.ä¸»è§‚ä¸‹çº¿</p><p>SDOWN:subjectively down,ç›´æ¥ç¿»è¯‘çš„ä¸ºâ€ä¸»è§‚â€å¤±æ•ˆ,å³å½“å‰sentinelå®ä¾‹è®¤ä¸ºæŸä¸ªredisæœåŠ¡ä¸ºâ€ä¸å¯ç”¨â€çŠ¶æ€.</p><p>äºŒ.å®¢è§‚ä¸‹çº¿</p><p>ODOWN:objectively down,ç›´æ¥ç¿»è¯‘ä¸ºâ€å®¢è§‚â€å¤±æ•ˆ,å³å¤šä¸ªsentinelå®ä¾‹éƒ½è®¤ä¸ºmasterå¤„äºâ€SDOWNâ€çŠ¶æ€,é‚£ä¹ˆæ­¤æ—¶masterå°†å¤„äºODOWN,ODOWNå¯ä»¥ç®€å•ç†è§£ä¸ºmasterå·²ç»è¢«é›†ç¾¤ç¡®å®šä¸ºâ€ä¸å¯ç”¨â€,å°†ä¼šå¼€å¯æ•…éšœè½¬ç§»æœºåˆ¶.</p><p>ç»“åˆæˆ‘ä»¬ç¬¬4ç‚¹æ­å»ºä¸»ä»æ¨¡å¼,éªŒè¯ä¸»ä»åˆ‡æ¢æ—¶,killæ‰Redisä¸»èŠ‚ç‚¹,ç„¶åæŸ¥çœ‹ sentinel æ—¥å¿—,å¦‚ä¸‹:</p><figure><img src="/images/1120165-20200210201842784-528299150.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>å‘ç°æœ‰ç±»ä¼¼ sdown å’Œ odown çš„æ—¥å¿—.åœ¨ç»“åˆæˆ‘ä»¬é…ç½® sentinel æ—¶çš„é…ç½®æ–‡ä»¶æ¥çœ‹:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#ç›‘æ§çš„IP ç«¯å£å· åç§° sentinelé€šè¿‡æŠ•ç¥¨åè®¤ä¸ºmaterå®•æœºçš„æ•°é‡ï¼Œæ­¤å¤„ä¸ºè‡³å°‘``2``ä¸ª``</span>
sentinel monitor mymaster <span class="token number">192.168</span>.14.101 <span class="token number">6379</span> <span class="token number">2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€åçš„ 2 è¡¨ç¤ºæŠ•ç¥¨æ•°,ä¹Ÿå°±æ˜¯è¯´å½“ä¸€å° sentinel å‘ç°ä¸€ä¸ª Redis æœåŠ¡æ— æ³• ping é€šæ—¶,å°±æ ‡è®°ä¸º ä¸»è§‚ä¸‹çº¿ sdown;åŒæ—¶å¦å¤–çš„ sentinel æœåŠ¡ä¹Ÿå‘ç°è¯¥ Redis æœåŠ¡å®•æœº,ä¹Ÿæ ‡è®°ä¸º ä¸»è§‚ä¸‹çº¿,å½“å¤šå° sentinel (å¤§äºç­‰äº2,ä¸Šé¢é…ç½®çš„æœ€åä¸€ä¸ª)æ—¶,éƒ½æ ‡è®°è¯¥RedisæœåŠ¡å®•æœº,è¿™æ—¶å€™å°±å˜ä¸ºå®¢è§‚ä¸‹çº¿äº†,ç„¶åè¿›è¡Œæ•…éšœè½¬ç§».</p><p><strong>â‘¢ã€æ•…éšœè½¬ç§»</strong></p><p>æ•…éšœè½¬ç§»æ˜¯ç”± sentinel é¢†å¯¼è€…èŠ‚ç‚¹æ¥å®Œæˆçš„(åªéœ€è¦ä¸€ä¸ªsentinelèŠ‚ç‚¹),å…³äº sentinel é¢†å¯¼è€…èŠ‚ç‚¹çš„é€‰å–ä¹Ÿæ˜¯æ¯ä¸ª sentinel å‘å…¶ä»– sentinel èŠ‚ç‚¹å‘é€æˆ‘è¦æˆä¸ºé¢†å¯¼è€…çš„å‘½ä»¤,è¶…è¿‡åŠæ•°sentinel èŠ‚ç‚¹åŒæ„,å¹¶ä¸”ä¹Ÿå¤§äºquorum ,é‚£ä¹ˆä»–å°†æˆä¸ºé¢†å¯¼è€…,å¦‚æœæœ‰å¤šä¸ªsentineléƒ½æˆä¸ºäº†é¢†å¯¼è€…,åˆ™ä¼šè¿‡æ®µæ—¶é—´åœ¨è¿›è¡Œé€‰ä¸¾.</p><p>sentinel é¢†å¯¼è€…èŠ‚ç‚¹é€‰ä¸¾å‡ºæ¥å,ä¼šé€šè¿‡å¦‚ä¸‹å‡ æ­¥è¿›è¡Œæ•…éšœè½¬ç§»:</p><p>ä¸€.ä» slave èŠ‚ç‚¹ä¸­é€‰å‡ºä¸€ä¸ªåˆé€‚çš„ èŠ‚ç‚¹ä½œä¸ºæ–°çš„masterèŠ‚ç‚¹.è¿™é‡Œçš„åˆé€‚åŒ…æ‹¬å¦‚ä¸‹å‡ ç‚¹:</p><p>1.é€‰æ‹© slave-priority(slaveèŠ‚ç‚¹ä¼˜å…ˆçº§)æœ€é«˜çš„slaveèŠ‚ç‚¹,å¦‚æœå­˜åœ¨åˆ™è¿”å›,ä¸å­˜åœ¨åˆ™ç»§ç»­ä¸‹ä¸€æ­¥åˆ¤æ–­.</p><p>2.é€‰æ‹©å¤åˆ¶åç§»é‡æœ€å¤§çš„ slave èŠ‚ç‚¹(å¤åˆ¶çš„æœ€å®Œæ•´),å¦‚æœå­˜åœ¨åˆ™è¿”å›,ä¸å­˜åœ¨åˆ™ç»§ç»­.</p><p>3.é€‰æ‹©runIdæœ€å°çš„slaveèŠ‚ç‚¹(å¯åŠ¨æœ€æ—©çš„èŠ‚ç‚¹)</p><p>äºŒ.å¯¹ä¸Šé¢é€‰å‡ºæ¥çš„ slave èŠ‚ç‚¹æ‰§è¡Œ slaveof no one å‘½ä»¤è®©å…¶æˆä¸ºæ–°çš„ master èŠ‚ç‚¹.</p><p>ä¸‰.å‘å‰©ä½™çš„ slave èŠ‚ç‚¹å‘é€å‘½ä»¤,è®©ä»–ä»¬æˆä¸ºæ–°master èŠ‚ç‚¹çš„ slave èŠ‚ç‚¹,å¤åˆ¶è§„åˆ™å’Œå‰é¢è®¾ç½®çš„ parallel-syncs å‚æ•°æœ‰å…³.</p><p>å››.æ›´æ–°åŸæ¥master èŠ‚ç‚¹é…ç½®ä¸º slave èŠ‚ç‚¹,å¹¶ä¿æŒå¯¹å…¶è¿›è¡Œå…³æ³¨,ä¸€æ—¦è¿™ä¸ªèŠ‚ç‚¹é‡æ–°æ¢å¤æ­£å¸¸å,ä¼šå‘½ä»¤å®ƒå»å¤åˆ¶æ–°çš„masterèŠ‚ç‚¹ä¿¡æ¯.(æ³¨æ„:åŸæ¥çš„masterèŠ‚ç‚¹æ¢å¤åæ˜¯ä½œä¸ºslaveçš„è§’è‰²)</p><p>å¯ä»¥ä» sentinel æ—¥å¿—ä¸­å‡ºç°çš„å‡ ä¸ªæ¶ˆæ¯æ¥è¿›è¡ŒæŸ¥çœ‹æ•…éšœè½¬ç§»:</p><p>1.<strong>+switch-master</strong>:è¡¨ç¤ºåˆ‡æ¢ä¸»èŠ‚ç‚¹(ä»èŠ‚ç‚¹æ™‹å‡ä¸ºä¸»èŠ‚ç‚¹)</p><p>2.<strong>+sdown</strong>:ä¸»è§‚ä¸‹çº¿</p><p>3.<strong>+odown</strong>:å®¢è§‚ä¸‹çº¿</p><p>4.<strong>+convert-to-slave</strong>:åˆ‡æ¢ä»èŠ‚ç‚¹(åŸä¸»èŠ‚ç‚¹é™ä¸ºä»èŠ‚ç‚¹)</p><h2 id="ç¼“å­˜ç©¿é€ã€å‡»ç©¿å’Œé›ªå´©" tabindex="-1"><a class="header-anchor" href="#ç¼“å­˜ç©¿é€ã€å‡»ç©¿å’Œé›ªå´©" aria-hidden="true">#</a> ç¼“å­˜ç©¿é€ã€å‡»ç©¿å’Œé›ªå´©</h2><h3 id="_1ã€ç¼“å­˜ç©¿é€" tabindex="-1"><a class="header-anchor" href="#_1ã€ç¼“å­˜ç©¿é€" aria-hidden="true">#</a> 1ã€ç¼“å­˜ç©¿é€</h3><h4 id="ä¸€ã€æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€æ¦‚å¿µ" aria-hidden="true">#</a> ä¸€ã€æ¦‚å¿µ</h4><p>ç¼“å­˜ç©¿é€ï¼šç¼“å­˜å’Œæ•°æ®åº“ä¸­éƒ½æ²¡æœ‰çš„æ•°æ®ï¼Œå¯ç”¨æˆ·è¿˜æ˜¯æºæºä¸æ–­çš„å‘èµ·è¯·æ±‚ï¼Œå¯¼è‡´æ¯æ¬¡è¯·æ±‚éƒ½ä¼šåˆ°æ•°æ®åº“ï¼Œä»è€Œå‹å®æ•°æ®åº“ã€‚</p><p>å¦‚ä¸‹å›¾çº¢è‰²çš„æµç¨‹ï¼š</p><figure><img src="/images/1120165-20200808214325134-1676845673.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>æ¯”å¦‚å®¢æˆ·æŸ¥è¯¢ä¸€ä¸ªæ ¹æœ¬ä¸å­˜åœ¨çš„ä¸œè¥¿ï¼Œé¦–å…ˆä»Redisä¸­æŸ¥ä¸åˆ°ï¼Œç„¶åä¼šå»æ•°æ®åº“ä¸­æŸ¥è¯¢ï¼Œæ•°æ®åº“ä¸­ä¹ŸæŸ¥è¯¢ä¸åˆ°ï¼Œé‚£ä¹ˆå°±ä¸ä¼šå°†æ•°æ®æ”¾å…¥åˆ°ç¼“å­˜ä¸­ï¼Œåé¢å¦‚æœè¿˜æœ‰ç±»ä¼¼æºæºä¸æ–­çš„è¯·æ±‚ï¼Œæœ€åéƒ½ä¼šå‹åˆ°æ•°æ®åº“æ¥å¤„ç†ï¼Œä»è€Œç»™æ•°æ®åº“é€ æˆå·¨å¤§çš„å‹åŠ›ã€‚</p><h4 id="äºŒã€è§£å†³åŠæ³•" tabindex="-1"><a class="header-anchor" href="#äºŒã€è§£å†³åŠæ³•" aria-hidden="true">#</a> äºŒã€è§£å†³åŠæ³•</h4><p><strong>â‘ ã€ä¸šåŠ¡å±‚æ ¡éªŒ</strong></p><p>ç”¨æˆ·å‘è¿‡æ¥çš„è¯·æ±‚ï¼Œæ ¹æ®è¯·æ±‚å‚æ•°è¿›è¡Œæ ¡éªŒï¼Œå¯¹äºæ˜æ˜¾é”™è¯¯çš„å‚æ•°ï¼Œç›´æ¥æ‹¦æˆªè¿”å›ã€‚</p><p>æ¯”å¦‚ï¼Œè¯·æ±‚å‚æ•°ä¸ºä¸»é”®è‡ªå¢idï¼Œé‚£ä¹ˆå¯¹äºè¯·æ±‚å°äº0çš„idå‚æ•°ï¼Œæ˜æ˜¾ä¸ç¬¦åˆï¼Œå¯ä»¥ç›´æ¥è¿”å›é”™è¯¯è¯·æ±‚ã€‚</p><p><strong>â‘¡ã€ä¸å­˜åœ¨æ•°æ®è®¾ç½®çŸ­è¿‡æœŸæ—¶é—´</strong></p><p>å¯¹äºæŸä¸ªæŸ¥è¯¢ä¸ºç©ºçš„æ•°æ®ï¼Œå¯ä»¥å°†è¿™ä¸ªç©ºç»“æœè¿›è¡ŒRedisç¼“å­˜ï¼Œä½†æ˜¯è®¾ç½®å¾ˆçŸ­çš„è¿‡æœŸæ—¶é—´ï¼Œæ¯”å¦‚30sï¼Œå¯ä»¥æ ¹æ®å®é™…ä¸šåŠ¡è®¾å®šã€‚æ³¨æ„ä¸€å®šä¸è¦å½±å“æ­£å¸¸ä¸šåŠ¡ã€‚</p><p><strong>â‘¢ã€å¸ƒéš†è¿‡æ»¤å™¨</strong></p><p>å…³äºå¸ƒéš†è¿‡æ»¤å™¨ï¼Œåé¢ä¼šè¯¦ç»†ä»‹ç»ã€‚å¸ƒéš†è¿‡æ»¤å™¨æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œåˆ©ç”¨æå°çš„å†…å­˜ï¼Œå¯ä»¥åˆ¤æ–­å¤§é‡çš„æ•°æ®â€œä¸€å®šä¸å­˜åœ¨æˆ–è€…å¯èƒ½å­˜åœ¨â€ã€‚</p><p>å¯¹äºç¼“å­˜ç©¿é€ï¼Œæˆ‘ä»¬å¯ä»¥å°†æŸ¥è¯¢çš„æ•°æ®æ¡ä»¶éƒ½å“ˆå¸Œåˆ°ä¸€ä¸ªè¶³å¤Ÿå¤§çš„å¸ƒéš†è¿‡æ»¤å™¨ä¸­ï¼Œç”¨æˆ·å‘é€çš„è¯·æ±‚ä¼šå…ˆè¢«å¸ƒéš†è¿‡æ»¤å™¨æ‹¦æˆªï¼Œä¸€å®šä¸å­˜åœ¨çš„æ•°æ®å°±ç›´æ¥æ‹¦æˆªè¿”å›äº†ï¼Œä»è€Œé¿å…ä¸‹ä¸€æ­¥å¯¹æ•°æ®åº“çš„å‹åŠ›ã€‚</p><h3 id="_2ã€ç¼“å­˜å‡»ç©¿" tabindex="-1"><a class="header-anchor" href="#_2ã€ç¼“å­˜å‡»ç©¿" aria-hidden="true">#</a> 2ã€ç¼“å­˜å‡»ç©¿</h3><h4 id="ä¸€ã€æ¦‚å¿µ-1" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€æ¦‚å¿µ-1" aria-hidden="true">#</a> ä¸€ã€æ¦‚å¿µ</h4><p>ç¼“å­˜å‡»ç©¿ï¼šRedisä¸­ä¸€ä¸ªçƒ­ç‚¹keyåœ¨å¤±æ•ˆçš„åŒæ—¶ï¼Œå¤§é‡çš„è¯·æ±‚è¿‡æ¥ï¼Œä»è€Œä¼šå…¨éƒ¨åˆ°è¾¾æ•°æ®åº“ï¼Œå‹å®æ•°æ®åº“ã€‚</p><figure><img src="/images/1120165-20200808214359739-1247536410.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>è¿™é‡Œè¦æ³¨æ„çš„æ˜¯è¿™æ˜¯æŸä¸€ä¸ªçƒ­ç‚¹keyè¿‡æœŸå¤±æ•ˆï¼Œå’Œåé¢ä»‹ç»ç¼“å­˜é›ªå´©æ˜¯æœ‰åŒºåˆ«çš„ã€‚æ¯”å¦‚æ·˜å®åŒåä¸€ï¼Œå¯¹äºæŸä¸ªç‰¹ä»·çƒ­é—¨çš„å•†å“ä¿¡æ¯ï¼Œç¼“å­˜åœ¨Redisä¸­ï¼Œåˆšå¥½0ç‚¹ï¼Œè¿™ä¸ªå•†å“ä¿¡æ¯åœ¨Redisä¸­è¿‡æœŸæŸ¥ä¸åˆ°äº†ï¼Œè¿™æ—¶å€™å¤§é‡çš„ç”¨æˆ·åˆåŒæ—¶æ­£å¥½è®¿é—®è¿™ä¸ªå•†å“ï¼Œå°±ä¼šé€ æˆå¤§é‡çš„è¯·æ±‚åŒæ—¶åˆ°è¾¾æ•°æ®åº“ã€‚</p><h4 id="äºŒã€è§£å†³åŠæ³•-1" tabindex="-1"><a class="header-anchor" href="#äºŒã€è§£å†³åŠæ³•-1" aria-hidden="true">#</a> äºŒã€è§£å†³åŠæ³•</h4><p><strong>â‘ ã€è®¾ç½®çƒ­ç‚¹æ•°æ®æ°¸ä¸è¿‡æœŸ</strong></p><p>å¯¹äºæŸä¸ªéœ€è¦é¢‘ç¹è·å–çš„ä¿¡æ¯ï¼Œç¼“å­˜åœ¨Redisä¸­ï¼Œå¹¶è®¾ç½®å…¶æ°¸ä¸è¿‡æœŸã€‚å½“ç„¶è¿™ç§æ–¹å¼æ¯”è¾ƒç²—æš´ï¼Œå¯¹äºæŸäº›ä¸šåŠ¡åœºæ™¯æ˜¯ä¸é€‚åˆçš„ã€‚</p><p><strong>â‘¡ã€å®šæ—¶æ›´æ–°</strong></p><p>æ¯”å¦‚è¿™ä¸ªçƒ­ç‚¹æ•°æ®çš„è¿‡æœŸæ—¶é—´æ˜¯1hï¼Œé‚£ä¹ˆæ¯åˆ°59minutesæ—¶ï¼Œé€šè¿‡å®šæ—¶ä»»åŠ¡å»æ›´æ–°è¿™ä¸ªçƒ­ç‚¹keyï¼Œå¹¶é‡æ–°è®¾ç½®å…¶è¿‡æœŸæ—¶é—´ã€‚</p><p>â‘¢**ã€äº’æ–¥é”**</p><p>è¿™æ˜¯è§£å†³ç¼“å­˜å‡»ç©¿æ¯”è¾ƒå¸¸ç”¨çš„æ–¹æ³•ã€‚</p><p>äº’æ–¥é”ç®€å•æ¥è¯´å°±æ˜¯åœ¨Redisä¸­æ ¹æ®keyè·å¾—çš„valueå€¼ä¸ºç©ºæ—¶ï¼Œå…ˆé”ä¸Šï¼Œç„¶åä»æ•°æ®åº“åŠ è½½ï¼ŒåŠ è½½å®Œæ¯•ï¼Œé‡Šæ”¾é”ã€‚è‹¥å…¶ä»–çº¿ç¨‹ä¹Ÿåœ¨è¯·æ±‚è¯¥keyæ—¶ï¼Œå‘ç°è·å–é”å¤±è´¥ï¼Œåˆ™ç¡çœ ä¸€æ®µæ—¶é—´ï¼ˆæ¯”å¦‚100msï¼‰åé‡è¯•ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨åŒé‡æ£€æµ‹åŒæ­¥é”ï¼š<a href="https://blog.csdn.net/weixin_42857269/article/details/120181414" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/weixin_42857269/article/details/120181414<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="_3ã€ç¼“å­˜é›ªå´©" tabindex="-1"><a class="header-anchor" href="#_3ã€ç¼“å­˜é›ªå´©" aria-hidden="true">#</a> <strong>3ã€ç¼“å­˜é›ªå´©</strong></h3><h4 id="ä¸€ã€æ¦‚å¿µ-2" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€æ¦‚å¿µ-2" aria-hidden="true">#</a> ä¸€ã€æ¦‚å¿µ</h4><p>ç¼“å­˜é›ªå´©ï¼šRedisä¸­ç¼“å­˜çš„æ•°æ®å¤§é¢ç§¯åŒæ—¶å¤±æ•ˆï¼Œæˆ–è€…Rediså®•æœºï¼Œä»è€Œä¼šå¯¼è‡´å¤§é‡è¯·æ±‚ç›´æ¥åˆ°æ•°æ®åº“ï¼Œå‹å®æ•°æ®åº“ã€‚</p><figure><img src="/images/1120165-20200329215008122-335003416.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>å¯¹äºä¸€ä¸ªä¸šåŠ¡ç³»ç»Ÿï¼Œå¦‚æœRediså®•æœºæˆ–å¤§é¢ç§¯çš„keyåŒæ—¶è¿‡æœŸï¼Œä¼šå¯¼è‡´å¤§é‡è¯·æ±‚åŒæ—¶æ‰“åˆ°æ•°æ®åº“ï¼Œè¿™æ˜¯ç¾éš¾æ€§çš„é—®é¢˜ã€‚</p><h4 id="äºŒã€è§£å†³åŠæ³•-2" tabindex="-1"><a class="header-anchor" href="#äºŒã€è§£å†³åŠæ³•-2" aria-hidden="true">#</a> äºŒã€è§£å†³åŠæ³•</h4><p><strong>â‘ ã€è®¾ç½®æœ‰æ•ˆæœŸå‡åŒ€åˆ†å¸ƒ</strong></p><p>é¿å…ç¼“å­˜è®¾ç½®ç›¸è¿‘çš„æœ‰æ•ˆæœŸï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è®¾ç½®æœ‰æ•ˆæœŸæ—¶å¢åŠ éšæœºå€¼ï¼›</p><p>æˆ–è€…ç»Ÿä¸€è§„åˆ’æœ‰æ•ˆæœŸï¼Œä½¿å¾—è¿‡æœŸæ—¶é—´å‡åŒ€åˆ†å¸ƒã€‚</p><p><strong>â‘¡ã€æ•°æ®é¢„çƒ­</strong></p><p>å¯¹äºå³å°†æ¥ä¸´çš„å¤§é‡è¯·æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥æå‰èµ°ä¸€éç³»ç»Ÿï¼Œå°†æ•°æ®æå‰ç¼“å­˜åœ¨Redisä¸­ï¼Œå¹¶è®¾ç½®ä¸åŒçš„è¿‡æœŸæ—¶é—´ã€‚</p><p><strong>â‘¢ã€ä¿è¯RedisæœåŠ¡é«˜å¯ç”¨</strong></p><p>å‰é¢æˆ‘ä»¬ä»‹ç»è¿‡Redisçš„å“¨å…µæ¨¡å¼å’Œé›†ç¾¤æ¨¡å¼ï¼Œä¸ºé˜²æ­¢Redisé›†ç¾¤å•èŠ‚ç‚¹æ•…éšœï¼Œå¯ä»¥é€šè¿‡è¿™ä¸¤ç§æ¨¡å¼å®ç°é«˜å¯ç”¨ã€‚</p><h2 id="å¸ƒéš†è¿‡æ»¤å™¨" tabindex="-1"><a class="header-anchor" href="#å¸ƒéš†è¿‡æ»¤å™¨" aria-hidden="true">#</a> å¸ƒéš†è¿‡æ»¤å™¨</h2><h3 id="_1ã€å¸ƒéš†è¿‡æ»¤å™¨ä½¿ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#_1ã€å¸ƒéš†è¿‡æ»¤å™¨ä½¿ç”¨åœºæ™¯" aria-hidden="true">#</a> 1ã€å¸ƒéš†è¿‡æ»¤å™¨ä½¿ç”¨åœºæ™¯</h3><p>æ¯”å¦‚æœ‰å¦‚ä¸‹å‡ ä¸ªéœ€æ±‚ï¼š</p><p>â‘ ã€åŸæœ¬æœ‰10äº¿ä¸ªå·ç ï¼Œç°åœ¨åˆæ¥äº†10ä¸‡ä¸ªå·ç ï¼Œè¦å¿«é€Ÿå‡†ç¡®åˆ¤æ–­è¿™10ä¸‡ä¸ªå·ç æ˜¯å¦åœ¨10äº¿ä¸ªå·ç åº“ä¸­ï¼Ÿ</p><p>è§£å†³åŠæ³•ä¸€ï¼šå°†10äº¿ä¸ªå·ç å­˜å…¥æ•°æ®åº“ä¸­ï¼Œè¿›è¡Œæ•°æ®åº“æŸ¥è¯¢ï¼Œå‡†ç¡®æ€§æœ‰äº†ï¼Œä½†æ˜¯é€Ÿåº¦ä¼šæ¯”è¾ƒæ…¢ã€‚</p><p>è§£å†³åŠæ³•äºŒï¼šå°†10äº¿å·ç æ”¾å…¥å†…å­˜ä¸­ï¼Œæ¯”å¦‚Redisç¼“å­˜ä¸­ï¼Œè¿™é‡Œæˆ‘ä»¬ç®—ä¸€ä¸‹å ç”¨å†…å­˜å¤§å°ï¼š10äº¿*8å­—èŠ‚=8GBï¼Œé€šè¿‡å†…å­˜æŸ¥è¯¢ï¼Œå‡†ç¡®æ€§å’Œé€Ÿåº¦éƒ½æœ‰äº†ï¼Œä½†æ˜¯å¤§çº¦8gbçš„å†…å­˜ç©ºé—´ï¼ŒæŒºæµªè´¹å†…å­˜ç©ºé—´çš„ã€‚</p><p>â‘¡ã€æ¥è§¦è¿‡çˆ¬è™«çš„ï¼Œåº”è¯¥æœ‰è¿™ä¹ˆä¸€ä¸ªéœ€æ±‚ï¼Œéœ€è¦çˆ¬è™«çš„ç½‘ç«™åƒåƒä¸‡ä¸‡ï¼Œå¯¹äºä¸€ä¸ªæ–°çš„ç½‘ç«™urlï¼Œæˆ‘ä»¬å¦‚ä½•åˆ¤æ–­è¿™ä¸ªurlæˆ‘ä»¬æ˜¯å¦å·²ç»çˆ¬è¿‡äº†ï¼Ÿ</p><p>è§£å†³åŠæ³•è¿˜æ˜¯ä¸Šé¢çš„ä¸¤ç§ï¼Œå¾ˆæ˜¾ç„¶ï¼Œéƒ½ä¸å¤ªå¥½ã€‚</p><p>â‘¢ã€åŒç†è¿˜æœ‰åƒåœ¾é‚®ç®±çš„è¿‡æ»¤ã€‚</p><p>é‚£ä¹ˆå¯¹äºç±»ä¼¼è¿™ç§ï¼Œå¤§æ•°æ®é‡é›†åˆï¼Œå¦‚ä½•å‡†ç¡®å¿«é€Ÿçš„åˆ¤æ–­æŸä¸ªæ•°æ®æ˜¯å¦åœ¨å¤§æ•°æ®é‡é›†åˆä¸­ï¼Œå¹¶ä¸”ä¸å ç”¨å†…å­˜ï¼Œ<strong>å¸ƒéš†è¿‡æ»¤å™¨</strong>åº”è¿è€Œç”Ÿäº†ã€‚</p><h3 id="_2ã€å¸ƒéš†è¿‡æ»¤å™¨ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#_2ã€å¸ƒéš†è¿‡æ»¤å™¨ç®€ä»‹" aria-hidden="true">#</a> 2ã€å¸ƒéš†è¿‡æ»¤å™¨ç®€ä»‹</h3><p>å¸¦ç€ä¸Šé¢çš„å‡ ä¸ªç–‘é—®ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹åˆ°åº•ä»€ä¹ˆæ˜¯å¸ƒéš†è¿‡æ»¤å™¨ã€‚</p><p>å¸ƒéš†è¿‡æ»¤å™¨ï¼šä¸€ç§æ•°æ®ç»“æ„ï¼Œæ˜¯ç”±ä¸€ä¸²å¾ˆé•¿çš„äºŒè¿›åˆ¶å‘é‡ç»„æˆï¼Œå¯ä»¥å°†å…¶çœ‹æˆä¸€ä¸ªäºŒè¿›åˆ¶æ•°ç»„ã€‚æ—¢ç„¶æ˜¯äºŒè¿›åˆ¶ï¼Œé‚£ä¹ˆé‡Œé¢å­˜æ”¾çš„ä¸æ˜¯0ï¼Œå°±æ˜¯1ï¼Œä½†æ˜¯åˆå§‹é»˜è®¤å€¼éƒ½æ˜¯0ã€‚</p><p>å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure><img src="/images/1120165-20200330220824117-1290183653.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><strong>â‘ ã€æ·»åŠ æ•°æ®</strong></p><p>ä»‹ç»æ¦‚å¿µçš„æ—¶å€™ï¼Œæˆ‘ä»¬è¯´å¯ä»¥å°†å¸ƒéš†è¿‡æ»¤å™¨çœ‹æˆä¸€ä¸ªå®¹å™¨ï¼Œé‚£ä¹ˆå¦‚ä½•å‘å¸ƒéš†è¿‡æ»¤å™¨ä¸­æ·»åŠ ä¸€ä¸ªæ•°æ®å‘¢ï¼Ÿ</p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šå½“è¦å‘å¸ƒéš†è¿‡æ»¤å™¨ä¸­æ·»åŠ ä¸€ä¸ªå…ƒç´ keyæ—¶ï¼Œæˆ‘ä»¬é€šè¿‡å¤šä¸ªhashå‡½æ•°ï¼Œç®—å‡ºä¸€ä¸ªå€¼ï¼Œç„¶åå°†è¿™ä¸ªå€¼æ‰€åœ¨çš„æ–¹æ ¼ç½®ä¸º1ã€‚</p><p>æ¯”å¦‚ï¼Œä¸‹å›¾hash1(key)=1ï¼Œé‚£ä¹ˆåœ¨ç¬¬2ä¸ªæ ¼å­å°†0å˜ä¸º1ï¼ˆæ•°ç»„æ˜¯ä»0å¼€å§‹è®¡æ•°çš„ï¼‰ï¼Œhash2(key)=7ï¼Œé‚£ä¹ˆå°†ç¬¬8ä¸ªæ ¼å­ç½®ä½1ï¼Œä¾æ¬¡ç±»æ¨ã€‚</p><figure><img src="/images/1120165-20200330221613591-2062171492.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><strong>â‘¡ã€åˆ¤æ–­æ•°æ®æ˜¯å¦å­˜åœ¨ï¼Ÿ</strong></p><p>çŸ¥é“äº†å¦‚ä½•å‘å¸ƒéš†è¿‡æ»¤å™¨ä¸­æ·»åŠ ä¸€ä¸ªæ•°æ®ï¼Œé‚£ä¹ˆæ–°æ¥ä¸€ä¸ªæ•°æ®ï¼Œæˆ‘ä»¬å¦‚ä½•åˆ¤æ–­å…¶æ˜¯å¦å­˜åœ¨äºè¿™ä¸ªå¸ƒéš†è¿‡æ»¤å™¨ä¸­å‘¢ï¼Ÿ</p><p>å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦å°†è¿™ä¸ªæ–°çš„æ•°æ®é€šè¿‡ä¸Šé¢è‡ªå®šä¹‰çš„å‡ ä¸ªå“ˆå¸Œå‡½æ•°ï¼Œåˆ†åˆ«ç®—å‡ºå„ä¸ªå€¼ï¼Œç„¶åçœ‹å…¶å¯¹åº”çš„åœ°æ–¹æ˜¯å¦éƒ½æ˜¯1ï¼Œå¦‚æœå­˜åœ¨ä¸€ä¸ªä¸æ˜¯1çš„æƒ…å†µï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¯´ï¼Œè¯¥æ–°æ•°æ®ä¸€å®šä¸å­˜åœ¨äºè¿™ä¸ªå¸ƒéš†è¿‡æ»¤å™¨ä¸­ã€‚</p><p>åè¿‡æ¥è¯´ï¼Œå¦‚æœé€šè¿‡å“ˆå¸Œå‡½æ•°ç®—å‡ºæ¥çš„å€¼ï¼Œå¯¹åº”çš„åœ°æ–¹éƒ½æ˜¯1ï¼Œé‚£ä¹ˆæˆ‘ä»¬èƒ½å¤Ÿè‚¯å®šçš„å¾—å‡ºï¼šè¿™ä¸ªæ•°æ®ä¸€å®šå­˜åœ¨äºè¿™ä¸ªå¸ƒéš†è¿‡æ»¤å™¨ä¸­å—ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯å¦å®šçš„ï¼Œå› ä¸ºå¤šä¸ªä¸åŒçš„æ•°æ®é€šè¿‡hashå‡½æ•°ç®—å‡ºæ¥çš„ç»“æœæ˜¯ä¼šæœ‰é‡å¤çš„ï¼Œæ‰€ä»¥ä¼šå­˜åœ¨æŸä¸ªä½ç½®æ˜¯åˆ«çš„æ•°æ®é€šè¿‡hashå‡½æ•°ç½®ä¸ºçš„1ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€ä¸ªç»“è®ºï¼š<strong>å¸ƒéš†è¿‡æ»¤å™¨å¯ä»¥åˆ¤æ–­æŸä¸ªæ•°æ®ä¸€å®šä¸å­˜åœ¨ï¼Œä½†æ˜¯æ— æ³•åˆ¤æ–­ä¸€å®šå­˜åœ¨</strong>ã€‚</p><p><strong>â‘¢ã€å¸ƒéš†è¿‡æ»¤å™¨ä¼˜ç¼ºç‚¹</strong></p><p>ä¼˜ç‚¹ï¼šä¼˜ç‚¹å¾ˆæ˜æ˜¾ï¼ŒäºŒè¿›åˆ¶ç»„æˆçš„æ•°ç»„ï¼Œå ç”¨å†…å­˜æå°‘ï¼Œå¹¶ä¸”æ’å…¥å’ŒæŸ¥è¯¢é€Ÿåº¦éƒ½è¶³å¤Ÿå¿«ã€‚</p><p>ç¼ºç‚¹ï¼šéšç€æ•°æ®çš„å¢åŠ ï¼Œè¯¯åˆ¤ç‡ä¼šå¢åŠ ï¼›è¿˜æœ‰æ— æ³•åˆ¤æ–­æ•°æ®ä¸€å®šå­˜åœ¨ï¼›å¦å¤–è¿˜æœ‰ä¸€ä¸ªé‡è¦ç¼ºç‚¹ï¼Œæ— æ³•åˆ é™¤æ•°æ®ã€‚</p><h3 id="_3ã€rediså®ç°å¸ƒéš†è¿‡æ»¤å™¨" tabindex="-1"><a class="header-anchor" href="#_3ã€rediså®ç°å¸ƒéš†è¿‡æ»¤å™¨" aria-hidden="true">#</a> 3ã€Rediså®ç°å¸ƒéš†è¿‡æ»¤å™¨</h3><h4 id="_1ã€bitmaps" tabindex="-1"><a class="header-anchor" href="#_1ã€bitmaps" aria-hidden="true">#</a> â‘ ã€bitmaps</h4><p>æˆ‘ä»¬çŸ¥é“è®¡ç®—æœºæ˜¯ä»¥äºŒè¿›åˆ¶ä½ä½œä¸ºåº•å±‚å­˜å‚¨çš„åŸºç¡€å•ä½ï¼Œä¸€ä¸ªå­—èŠ‚ç­‰äº8ä½ã€‚</p><p>æ¯”å¦‚â€œbigâ€å­—ç¬¦ä¸²æ˜¯ç”±ä¸‰ä¸ªå­—ç¬¦ç»„æˆçš„ï¼Œè¿™ä¸‰ä¸ªå­—ç¬¦å¯¹åº”çš„ASCIIç åˆ†ä¸ºæ˜¯98ã€105ã€103ï¼Œå¯¹åº”çš„äºŒè¿›åˆ¶å­˜å‚¨å¦‚ä¸‹ï¼š</p><figure><img src="/images/1120165-20200404213453130-714545258.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>åœ¨Redisä¸­ï¼ŒBitmaps æä¾›äº†ä¸€å¥—å‘½ä»¤ç”¨æ¥æ“ä½œç±»ä¼¼ä¸Šé¢å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸€ä¸ªä½ã€‚</p><p><strong>ä¸€ã€è®¾ç½®å€¼</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>setbit key offset value
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="/images/1120165-20200404214003953-5622706.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>æˆ‘ä»¬çŸ¥é“&quot;b&quot;çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸º0110 0010ï¼Œæˆ‘ä»¬å°†ç¬¬7ä½ï¼ˆä»0å¼€å§‹ï¼‰è®¾ç½®ä¸º1ï¼Œé‚£0110 0011 è¡¨ç¤ºçš„å°±æ˜¯å­—ç¬¦â€œcâ€ï¼Œæ‰€ä»¥æœ€åçš„å­—ç¬¦ â€œbigâ€å˜æˆäº†â€œcigâ€ã€‚</p><p><strong>äºŒã€è·å–å€¼</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>gitbit key offset
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="/images/1120165-20200404214216788-374691466.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><strong>ä¸‰ã€è·å–ä½å›¾æŒ‡å®šèŒƒå›´å€¼ä¸º1çš„ä¸ªæ•°</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>bitcount key [start end]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¦‚æœä¸æŒ‡å®šï¼Œé‚£å°±æ˜¯è·å–å…¨éƒ¨å€¼ä¸º1çš„ä¸ªæ•°ã€‚</p><p>æ³¨æ„ï¼šstartå’ŒendæŒ‡å®šçš„æ˜¯<strong>å­—èŠ‚çš„ä¸ªæ•°</strong>ï¼Œè€Œä¸æ˜¯ä½æ•°ç»„ä¸‹æ ‡ã€‚</p><figure><img src="/images/1120165-20200404214812688-1075855704.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h4 id="_2ã€redisson" tabindex="-1"><a class="header-anchor" href="#_2ã€redisson" aria-hidden="true">#</a> â‘¡ã€Redisson</h4><p>Redis å®ç°å¸ƒéš†è¿‡æ»¤å™¨çš„åº•å±‚å°±æ˜¯é€šè¿‡ bitmap è¿™ç§æ•°æ®ç»“æ„ï¼Œè‡³äºå¦‚ä½•å®ç°ï¼Œè¿™é‡Œå°±ä¸é‡å¤é€ è½®å­äº†ï¼Œä»‹ç»ä¸šç•Œæ¯”è¾ƒå¥½ç”¨çš„ä¸€ä¸ªå®¢æˆ·ç«¯å·¥å…·â€”â€”Redissonã€‚</p><p>Redisson æ˜¯ç”¨äºåœ¨ Java ç¨‹åºä¸­æ“ä½œ Redis çš„åº“ï¼Œåˆ©ç”¨Redisson æˆ‘ä»¬å¯ä»¥åœ¨ç¨‹åºä¸­è½»æ¾åœ°ä½¿ç”¨ Redisã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å°±é€šè¿‡ Redisson æ¥æ„é€ å¸ƒéš†è¿‡æ»¤å™¨ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>ys<span class="token punctuation">.</span>rediscluster<span class="token punctuation">.</span>bloomfilter<span class="token punctuation">.</span>redisson</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>redisson<span class="token punctuation">.</span></span><span class="token class-name">Redisson</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>redisson<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">RBloomFilter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>redisson<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">RedissonClient</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>redisson<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">Config</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedissonBloomFilter</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Config</span> config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">useSingleServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAddress</span><span class="token punctuation">(</span><span class="token string">&quot;redis://192.168.14.104:6379&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">useSingleServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//æ„é€ Redisson</span>
        <span class="token class-name">RedissonClient</span> redisson <span class="token operator">=</span> <span class="token class-name">Redisson</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">RBloomFilter</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> bloomFilter <span class="token operator">=</span> redisson<span class="token punctuation">.</span><span class="token function">getBloomFilter</span><span class="token punctuation">(</span><span class="token string">&quot;phoneList&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//åˆå§‹åŒ–å¸ƒéš†è¿‡æ»¤å™¨ï¼šé¢„è®¡å…ƒç´ ä¸º100000000L,è¯¯å·®ç‡ä¸º3%</span>
        bloomFilter<span class="token punctuation">.</span><span class="token function">tryInit</span><span class="token punctuation">(</span><span class="token number">100000000L</span><span class="token punctuation">,</span><span class="token number">0.03</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//å°†å·ç 10086æ’å…¥åˆ°å¸ƒéš†è¿‡æ»¤å™¨ä¸­</span>
        bloomFilter<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;10086&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//åˆ¤æ–­ä¸‹é¢å·ç æ˜¯å¦åœ¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bloomFilter<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//false</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bloomFilter<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;10086&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ˜¯å•èŠ‚ç‚¹çš„Rediså®ç°æ–¹å¼ï¼Œå¦‚æœæ•°æ®é‡æ¯”è¾ƒå¤§ï¼ŒæœŸæœ›çš„è¯¯å·®ç‡åˆå¾ˆä½ï¼Œé‚£å•èŠ‚ç‚¹æ‰€æä¾›çš„å†…å­˜æ˜¯æ— æ³•æ»¡è¶³çš„ï¼Œè¿™æ—¶å€™å¯ä»¥ä½¿ç”¨åˆ†å¸ƒå¼å¸ƒéš†è¿‡æ»¤å™¨ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥ç”¨ Redisson æ¥å®ç°ï¼Œè¿™é‡Œæˆ‘å°±ä¸åšä»£ç æ¼”ç¤ºäº†ï¼Œå¤§å®¶æœ‰å…´è¶£å¯ä»¥è¯•è¯•ã€‚</p><h3 id="_4ã€guava-å·¥å…·" tabindex="-1"><a class="header-anchor" href="#_4ã€guava-å·¥å…·" aria-hidden="true">#</a> 4ã€guava å·¥å…·</h3><p>æœ€åæä¸€ä¸‹ä¸ç”¨Rediså¦‚ä½•æ¥å®ç°å¸ƒéš†è¿‡æ»¤å™¨ã€‚</p><p>guava å·¥å…·åŒ…ç›¸ä¿¡å¤§å®¶éƒ½ç”¨è¿‡ï¼Œè¿™æ˜¯è°·æ­Œå…¬å¸æä¾›çš„ï¼Œé‡Œé¢ä¹Ÿæä¾›äº†å¸ƒéš†è¿‡æ»¤å™¨çš„å®ç°ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>ys<span class="token punctuation">.</span>rediscluster<span class="token punctuation">.</span>bloomfilter</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>common<span class="token punctuation">.</span>base<span class="token punctuation">.</span></span><span class="token class-name">Charsets</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>common<span class="token punctuation">.</span>hash<span class="token punctuation">.</span></span><span class="token class-name">BloomFilter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>common<span class="token punctuation">.</span>hash<span class="token punctuation">.</span></span><span class="token class-name">Funnel</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>common<span class="token punctuation">.</span>hash<span class="token punctuation">.</span></span><span class="token class-name">Funnels</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GuavaBloomFilter</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">BloomFilter</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> bloomFilter <span class="token operator">=</span> <span class="token class-name">BloomFilter</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Funnels</span><span class="token punctuation">.</span><span class="token function">stringFunnel</span><span class="token punctuation">(</span><span class="token class-name">Charsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">100000</span><span class="token punctuation">,</span><span class="token number">0.01</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        bloomFilter<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;10086&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bloomFilter<span class="token punctuation">.</span><span class="token function">mightContain</span><span class="token punctuation">(</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bloomFilter<span class="token punctuation">.</span><span class="token function">mightContain</span><span class="token punctuation">(</span><span class="token string">&quot;10086&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="åº•å±‚åŸç†" tabindex="-1"><a class="header-anchor" href="#åº•å±‚åŸç†" aria-hidden="true">#</a> åº•å±‚åŸç†</h2><h2 id="luaè„šæœ¬" tabindex="-1"><a class="header-anchor" href="#luaè„šæœ¬" aria-hidden="true">#</a> LUAè„šæœ¬</h2><h2 id="ä¸ºä»€ä¹ˆè¯´redisæ˜¯å•çº¿ç¨‹çš„ä»¥åŠredisä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆè¯´redisæ˜¯å•çº¿ç¨‹çš„ä»¥åŠredisä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«" aria-hidden="true">#</a> ä¸ºä»€ä¹ˆè¯´Redisæ˜¯å•çº¿ç¨‹çš„ä»¥åŠRedisä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼</h2><p><a href="https://blog.csdn.net/chenyao1994/article/details/79491337" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/chenyao1994/article/details/79491337<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com//Fearless-Coding/edit/main/src/data/æ•°æ®åº“/Redis/Redisè¿›é˜¶.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: 66700800@qq.com">pzy</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a aria-label="Rediså®æˆ˜" class="vp-link nav-link prev nav-link prev" href="/data/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/Redis%E5%AE%9E%E6%88%98.html"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->Rediså®æˆ˜</div></a><!----></nav><div id="comment" class="giscus-wrapper input-top" style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">é»˜è®¤é¡µè„š</div><div class="vp-copyright">Copyright Â© 2024 Fearless</div></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-8e0f9155.js" defer></script>
  </body>
</html>
